title: 退出状态码
date: 2017-01-05 16:44:57
updated: 2017-01-05 17:01:20
tags:
- Linux Shell
categories:
- Study
- Computer
- OS
- Linux
- API
- Shell
- Base
---
## 1 退出状态码

**shell**中运行的每个命令都使用**退出状态码(exit status)**来告诉**shell**他完成处理的情况。
退出状态码是一个**0~255**之间的整数值，在命令结束时有命令传给**shell**。

## 2 查看退出状态码

**Linux**提供了**$?**专属变量来保存上个执行的命令的退出状态码。
使用**echo**命令可以输出该状态码值。

```bash
$ echo $?
```

- 状态码不完全表

| 状态码 |             描述             |
|--------|------------------------------|
| 0      | 命令成功结束                 |
| 1      | 通用未知错误，如提供无效参数 |
| 2      | 误用shell命令，如权限不足    |
| 126    | 命令不可执行                 |
| 127    | 没找到命令                   |
| 128    | 无效退出参数                 |
| 128+x  | Linux信号x的严重错误         |
| 130    | 命令通过Ctrl+C终止           |
| 255    | 退出状态码越界               |

## 3 exit命令

默认情况下，**shell**脚本会以脚本中的最后一个命令的退出状态码退出。
但可以通过**exit**命令在脚本结束时指定一个退出状态码，如：

```sh
exit 0
```

以状态码**0**退出。

- 注意
    
    退出状态码的范围为**0~255**，超过这个值时会进行取模运算，从而再返回结果。
