---
layout: post
author: LPF
title: Guide to Unix & Linux学习笔记—— 4.开始使用Unix
date: 2017-04-16 22:20:48
updated: 2017-05-19 16:17:43
categories:
- Study
- Computer
- OS
- Linux
- Guide to Unix & Linux 
---
# 系统管理员

所有的Unix系统都需要管理和维护。执行这些这些职责的人称为`系统管理员`(System Adminstrator)，通常简称为`sysadmin`或`admin`。
系统管理永远是一个经验学习的过程(如果没有学会别的，那么至少学会了有耐心)。

----------


# 用户标识和口令

在使用Unix计算机之前,系统管理员必须给您一个用来向系统标识自己的名称。这个名称称为`用户标识`(userid)。单词userid是`user identification`的缩写,它的发音为*user-eye-dee*。
除用户标识之外,您还将得到一个`口令`(password),每次启动工作会话时,都必须键入口令。
一旦拥有使用Unix系统的权限,我们就可以说您拥有了这台计算机的`账户`。Unix会记录您使用系统的情况，并且可能还有一些特定的预定义限制，如允许文件使用多大的磁盘空间等。
每当启动一个Unix会话时,必须输入自己的用户标识。从这时起,Unix就使用这个名称来标识您。例如,当您创建文件时,它们不属于您:它们将被您的用户标识所`拥有`。
用户标识不是保密的。假设使用Unix发送邮件，那么用户标识将是电子邮件地址的一部分。此外，在任何时候,任何人都可以方便地显示所有当前正在使用系统的用户标识,而且——如果您知道自己正在做什么的话——您甚至还可以显示系统中注册的所有用户标识。
当然,安全非常重要,但是这并不要求用户标识是秘密的。较合理的方式是通过确保口令是秘密的来维护安全。通过这种方式,每个人都可以查看谁在使用计算机,但是对系统的访问是受控制的。

----------


# 登录

启动会话的过程称为`登录`。实际的登录过程相当简单。您所需做的全部事情就是键入您的用户标识和口令。
当Unix程序希望您键入一些东西时,它就显示一个`提示`(prompt),即一个指示必须从键盘输入一些内容的短消息。

在键入用户标识和口令时,有3件重要的事情希望您能记住。

- 一定不要将小写字母和大写字母混淆。例如,如果您的用户标识是**harley**,您就要键入harley,而不是Harley
- 小心不要将数字0和大写字母O混淆
- 小心不要将数字1和小写字母l混淆

----------


> 提示
当键入用户标识时,Unix总是询问口令,即使这个特定的用户标识是无效的,这就使怀有恶意的人难以猜测用户标识。
例如。如果有人输入用户标识harley。Unix系统总会向他询问口令,即使系统中没有注册这个用户标识。
当然,这还意味着如果错误地输入了用户标识或者口令,那么您也不知道是哪一个错了,Unix系统只会告诉您登录错误。

在结束本节内容之前,我希望指出一个很少有人注意到的奇怪事情。在几乎所有的Unix系统上,登录程序都显示login:(第一个字母是小写的**l**)和Password:(第一个字母是大写的**P**)。没有人知道为什么。
 

----------


> 名称含义
**Return 键**
现在,大多数键盘只拥有 *Enter* 键,而不再拥有 *Return* 键。那么为什么,以及那个时候Unix开始使用名称 *Return* 呢?
这一切要从传统说起。正如第3章中解释的,多年以来,Unix 一直通过终端访问,而不是通过PC,碰巧的是所有的终端都有一个 *Return* 键,尽管现在有无数的PC键盘提供 *Enter* 键,但是Unix术语没有改变。
名称**Return**来源于电传打字机。在旧年代,机械电传打字机中存放纸张的部件称为“托架”。每放入一张新纸时,托架就从最右边开始,在键入字符时,托架每一次向左移动一个字符。
当您到达一行的末尾时,需要使用您的左手推动操作杆将托架移回右边。同时,操作杆还将纸张向上移动一行。通过这种方式,纸张就定位到新行的起始位置上。
第一种Unix终端是Teletype ASR33机器。与电传打字机不同,它们没有可移动的托架。但是,当打印文本时,从一行的尾部转到下一行的开头依然包含两个单独的运动。这两个运动与推动电传打字机上的操作杆时发生的情况相似,因此人们使用电传打字机的术语来描述它们,称之为`托架回车`(carriage Return)扣`换行`(linefeed)。这两个术语在Unix世界中仍然重要,您将不时地遇到它们。

----------


# 登录之后发生的事

在成功登录之后，Unix将显示一些信息，后面跟一个邀请，让您输入命令。
登录成功后显示的信息各不相同，这取决于系统管理员对系统的配置。
第一行显示当前用户标识上一次登录该计算机的时间。无论何时，当您登录系统时，都要花一些时间检查一行。这样做是基于安全考虑。如果您看到的时间比您记忆中的时间更近,那么就可能有人在没有经过您的授权的情况下使用了您的账户。如果这样,您需要立即改变口令。
在登录信息显示之后所发生的事情部分取决于系统的设置。作为登录过程的一部分,Unix执行一系列存放在特殊的初始化丈件中的预定义命令。其中一些文件受系统管理员控制,因此他可以确保每次有人登录时都能够执行特定的任务。
除了一般的初始化文件之外,每个用户标识还拥有自己个人的能够定制的初始化文件。第一次登录时,您的初始化文件中包含的是系统管理员设置的默认命令。随着经验日益丰富,您就可以修改这些文件来满足您的爱好。例如,您可以让Unix在您每次登录时执行一个特定的程序。

----------


# 着手工作：shell提示

一旦初始化命令结束运行，Unix将启动shell，并将控制权交给他。然后shell显示一个提示——称为`shell提示`，并且等待输入命令。接下来，可以输入命令并按**Return**键，shell回恰当地处理命令(通常通过运行一个程序)。
在Unix世界中,有许多不同类型的shell,而且实际提示依赖于所使用的shell。目前3种最流行的shell(以流行程度排列)是Bash、C-Shell和Korn Shell，而一个比较复杂却又具有最高可制定性的shell则是zsh。
对于Bash和Korn Shell来说,提示是一个美元符号`$`，而C-Shell则是提示一个百分号`%`。如果系统管理员定制了环境，那么提示可能有点不同，例如，可能显示登录的机器名称等等。
登录后，可以使用以下命令：

|命令|说明|
|---|
|whoami|显示用户标识|
|who|显示当前登录系统的用户标识|
|w|显示谁登录了系统且他们正在做什么|
 
 
----------

# 注销

注销的方法有若干种。

- 等待直到看到shell提示，然后按**Ctrl-D**组合键

    当按下**Ctrl-D**组合键时，他将发送一个`eof`或者`end-of-file`信号。实质上，他告诉shell不再会有数据了。然后shell终止，Unix将用户注销。
    
- 使用特定的注销命令——**logout**和/或**exit**
- 使用**login**命令
    
    这告诉Unix用户将注销，并且准备以一个新用户标识登录。

----------


> 提示
在一些系统上,login命令并不能让您完全脱离系统,这时login将临时改变用户标识,但是您仍然以原始名称处于登录状态。当新用户注销时,他将回到您的原始会话中。
如果您的系统是这种情况,那么就不应该使用login迸行注销,因为它允许其他人在您的用户标识下结束登录。
您可以通过测试login来确认系统中login的工作方式。输入login命令,然后登录再注销,查看您是否回到原始会话中。如果是这样的话,使用login进行注销就是不安全的,请使用logout和exit。

----------


# 大写字母和小写字母

Unix区分小写字母和大写字母。一些操作系统被设计为忽略小写和大写字母之间的区别,一个著名的例了就是微软的Windows。

----------


>提示
大写字母和小写字母的思想只应用于字母表中的字母,不应用于标点符号、数字或者特殊字符。

----------


# 改变口令：passwd

您可以改变自己的口令。实际上,出于安全考虑,一些系统管理员会使用一个称为口令`过期时间`(password aging)的功能强制您定期改变口令(口令过期时间功能还可以用来防止您过于频繁地改变口令)。例如,系统可能要求您每60天改变一次口令。如果您的系统上安装有口令过期时间功能,而且您的口令已经过期,那么当您登录时,系统就会提醒您改变口令,然后强制您选择一个新口令。
除此之外,您还可以在您希望的时间自由地改变口令(只要系统管理员没有限制)。在改变口令时,需要使用命令passwd。一旦输入了命令passwd,passwd就会要求您键入旧口令。这样可以确认您有权改变口令。否则,任何一个在已经登录的终端或者计算机旁边的人都可以改变您的口令。
接下来,passwd要求键入新的口令。一些系统要求所有的口令都要满足特定的规范。例如,口令至少需要有8个字符。如果新口令不满足本机标准,那么系统将通知您并要求输入一个新的口令。
最后,passwd要求您再次键入新的口令。输入新口令两次可以确保在输入口令的过程中没有犯错误。
在键入口令时,字符是不回显的。这可以防止他人偷看到新口令。

----------


> 名称含义
**passwd**
为了改变密码,需要使用passwd命令,很明显。passwd是**password**的缩写,那么为什么不将这个命令命名为password呢?
答案就是Unix人喜欢短名称。在学习Unix时,您将碰到许多这种传统,例如,列举文件的命令是ls。复制文件的命令是cp。显示进程(正在运行的程序状态的命令是ps。这类命令数不胜数,起先,省略几个字母看上去并没有必要,而且还有点古怪,但是一旦适应了这种方式,您将会发现这种简洁让人特别舒适。

----------


# 口令选择

使用口令的原因就是为了确保只有授权的人才能够访问Unix账户。大家可以想象,总是有那么一些聪明的人一直在不断地尝试着潜入系统。这样的人称为`骇客`(cracker)
一些骇客只是希望挑战Unix的安全系统,看看他们能不能秘密地登录到系统中。还有一些骇客喜欢制造实质性的破坏。
因此,您需要

- 永远不把自己的口令告诉他人
- 选择一个不容易被猜测的口令。

记住,如果您将口令告诉了他人,而他破坏了计算机系统,那么您就要负责任。
口令选择的规则实际上是不要选取某些种类的口令的指南:

- 不要选择用户标识(例如`harley`),或者将用户标识反过来拼写(`yelrah`)。这样就好比将房间的钥匙藏在席子下面一样
- 不要选择自己的名字或者姓氏,或者两者的组合
- 不要选择爱人或者朋友的名字
- 不要选择字典中的单词
- 不要选择一串对自己有特殊含义的数字。例如电话号码、重要口期(例如生日)、社会保障号等
- 不要选择与Harry Potter、Star Wars、Monty Python、The Hitchhiker,s Guideto the Galaxy或者其他与流行文化相关的口令,即便只有一丝关联
- 不要选择一个键盘序列,例如`123456`、`qwerty`或者`lq2w3e4r`。有些密码猜测程序专门猜测这种类型的口令
- 不要使用口令fred。许多人选择使用这一口令,因为它容易键入,但它也是黑客首先尝试的口令
- 定期改变口令，如一个月一次
- 永远不要将口令写在一张纸上

一个理想的口令是您不用写下来就可以记住,但是其他入不易猜测,而且还永远不会出现在骇客的单词列表中。一个好的办法就是以一个对您有意义的短语或者句子作为对象,生成一个缩写。下面举一些例子:

    dontBL8 ("Don't be late")
    2b||~2b (for C programmers: "To be or not to be")
    Wan24NIK8? (random meaningless phrase)
    

----------


> 名称含义
**黑客、骇客**
花费大量时问编程的人有两种类型:黑客和骇客,黑客指那些花费时间在有用(或者至少无害)的编程项目上的人。
单词hack经常用作动词,表示对编程有传奇色彩的贡献,例如**Elmo spent all weekend hacking at his file-sharing program**(Elmo将全部周末时间都花在他的文件共享程序上)。
因此,术语“黑客”通常有正面的含义,描述那些像书呆子一样不停钻研的人。此外,“黑客”也指那些知道如何使用计算机创造性地解决问题的聪明人。
尽管不怎么酷,但是他们是对社会有用的人,全世界在经济上最成功的黑客就是比尔•盖茨。
**骇客**指坏家伙:以破坏计算机系统以及做专家不希望他做的事情为乐趣的人(注意这里我用了**他(him)**。这是因为——或许是遗传因素——几乎所有的骇客都是男性)。

----------


# 检查他人是否使用过您的Unix账户：last

每次登录时,您都要小心地查看开始的消息,大多数系统将告诉您上一次登录的时问和日期。如果您记着没有在那个时间登录过,那么可能有人使用了您的账户。
为了进一步检查,可以使用`last`命令。只需输入last命令并在之后跟着用户标识即可。
例如,如果您以harley登录,则输入:

```sh
last harley
```
您将会看到一些信息,告诉您上一次或者最近几次的登录时间。如果只输入了命令last而没有输入用户标识,那么您将看到系统上所有用户标识的信息。

----------


# 超级用户的用户标识：root

在Unix中,所有的用户标识都或多或少是平等的,只有一个例外。
有时候,系统管理员有必要拥有特殊的权限。例如,他需要在系统中添加一个新的用户、改变他人的口令、升级一些软件等。
按照这个要求,Unix支持一个特殊的用户标识,称为`root`。它拥有非凡的权限。使用root用户标识登录的人可以做任何希望做的事情(很明显,root的口令是一个要高度保守的秘密)。当有人以root登录时,我们就称他为`超级用户`。
大多数时间,系统管理员使用他自己的正常用户标识进行常规的工作,只有在进行需要特殊权限的工作时才切换到超级用户。一旦特殊任务完成,系统管理员又会切换回他自己的正常用户标识。这可以防止超级用户的强大权力不经意间对系统造成严重损害。

----------


> 提示
当shell做好接受命令的准备时,它会显示一个提示。提示的最后一个字符显示正在使用哪一种shell。例如。Korn Shell和Bash都使用字符$,而C-Shell使用字符%。
不管使用哪一种shell。当以超级用户登录时,提示都将改变成字符#。当看到#提示时,一定要小心——超级用户拥有极大的权利。

----------


# Reference 

[1] Haeley Hahn. Unix & Linux 大学教程[M]. 张杰良, 译. 北京:清华大学出版社, 2010.1:49-63.
