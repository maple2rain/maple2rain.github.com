title: find命令
date: 2017-01-05 16:37:07
updated: 2017-01-05 17:01:52
tags:
- Linux Shell
categories:
- Study
- Computer
- OS
- Linux
- API
- Shell
- Base
---
## 1 find命令

**find**命令用于搜索文件。

## 2 命令格式

```sh
find [path] [options] [tests] [actions]
```

其中：

    - **path**代表搜索路径，可以是绝对或相对路径
    - **options**代表选项
    - **tests**表示测试
    - **actions**表示动作

### 2.1 路径

路径可以是绝对或相对路径，并且可支持多个路径。

### 2.2 选项

下表是主要的选项：

|       选项      |                含义                |
|-----------------|------------------------------------|
| -depth          | 在查看目录本身之前先搜索目录的内容 |
| -follow         | 跟随符号链接                       |
| -maxdepths N    | 最多搜索N层目录                    |
| -mount(或-xdev) | 不搜索其他文件系统中的目录         |

### 2.3 测试

**find**命令开始工作时，它按照顺序将定义的每种测试依次应用到它搜索到的每个文件上。
如果一个测试返回**false**，则停止处理当前文件，并继续搜索。
如果一个测试返回**true**，则继续下一个测试或对当前文件采取行动。

下表是常用的测试：

|       测试       |                          含义                          |
|------------------|--------------------------------------------------------|
| -atime N         | 文件在N天之前被最后访问过                              |
| -mtime N         | 文件在N天之前被最后修改过                              |
| -name pattern    | 文件名匹配提供的模式pattern，pattern必须用引号括起     |
| -newer otherfile | 文件比otherfile要新                                    |
| -type c          | 文件的类型为c，c是一个特殊类型，如d(目录)和f(普通文件) |
| -user username   | 文件的拥有者是指定的用户username                       |

还可以用操作符来组合测试：

| 操作符，短格式 | 操作符，长格式 |        含义        |
|----------------|----------------|--------------------|
| !              | -not           | 测试取反           |
| -a             | -and           | 两个测试都必须为真 |
| -o             | -or            | 两个测试有一个为真 |

- 优先级

    可以通过使用圆括号来强制测试和操作符的优先级，但必须用反斜线来引用圆括号。
    
    ```sh
    find . \( -name "_*" -or newer otherfile \) -type f 
    ```
    上述命令在当前目录搜索比**otherfile**还要新或以**_**开头的文件，最后测试其是否是一个普通文件。

### 2.4 动作

下表是常见的动作：

|      动作     |                                   含义                                  |
|---------------|-------------------------------------------------------------------------|
| -exec command | 执行一条命令，该动作以\\;字符对结束                                     |
| -ok command   | 与-exec类似，但它在执行命令之前会针对每个要处理的文件，提示用户进行确认 |
| -print       | 打印文件名                                                              |
| -ls           | 对当前文件使用命令 ls -dils                                             |

- 例子

    ```sh
    find . -newer otherfile -type f -exec ls -l {} \;
    ```
    上述命令将在当前目录下搜索比**otherfile**还要新的文件，并测试其是否是普通文件，最后执行命令“ls -s”，其中参数**{}**将被替换成当前文件的完整路径。
