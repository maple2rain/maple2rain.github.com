---
layout: post
title: 网络测试
date: 2017-10-31 15:23:45
updated: 2017-10-31 15:58:42
categories:
- Study
- Computer
- Network
author: LPF
---

* content
{:toc}

在日常网络开发中，经常会需要应用在差网络下仍能正常工作，抑或是分析差网络下的应用性能。然而正常情况下很难制造差网络情形。
此时，可以使用网络测试工具及差网络模拟工具来实现差网络情形并实现自己想要的功能。





# 概念

## 网络抖动

如果网络发生拥塞，排队延迟将影响端到端的延迟，并导致通过同一连接传输的分组延迟各不相同，而抖动，就是用来描述这样一延迟变化的程度。
网络中的延迟是指信息从发送到接收经过的延迟时间，一般由传输延迟及处理延迟组成；而抖动是指最大延迟与最小延迟的时间差，如最大延迟是20毫秒，最小延迟为5毫秒，那么网络抖动就是15毫秒，它主要标识一个网络的稳定性。

- 抖动举例

    ![](../post_img/59f82eacab64412769001afe)
    以上，丢包率为0%, 最短延迟2为28ms, 最长延迟为44ms, 平均延迟为36ms, 则抖动为$$jitter = max - min = 44 - 28 = 16(ms)$$
    抖动率为 $$jitter / avg = 16 / 36 = 44 \% $$


**当出现网络抖动时，多媒体数据传送则不均匀，就会造成画面或声音颤抖。**

## 解决方法

1. 数据包接收端的抖动缓存指针队列的入队线程接收数据包，对接收到的数据包进行排序后将接收到的数据包插入抖动缓存指针队列的相应位置
2. 抖动缓存指针队列的出队线程定时器以一定时间间隔触发出队线程，出队线程判断抖动缓存指针队列队头的数据包是否应该在当前触发时刻出队，如果是，则将该数据包出队
3. 根据抖动缓存指针队列中的队尾数据包和队头数据包时戳值之差与当前抖动缓存深度的大小关系，以及根据数据包在抖动缓存指针队列中的缓存时间与该抖动缓存指针队列缓存数据包的最小延时量之间的关系，增大或缩小当前抖动缓存深度的操作。

# 网络测试工具

## iperf

